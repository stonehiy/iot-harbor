### mqtt-im 修改协议

[基于MQTT协议的移动IM系统设计与实现](https://www.sohu.com/a/113926583_354885)

#### mqtt pulish 控制报文

见：qmtt-im.png

5个字段含义如下：

`type`:消息类型，1个字节，不可为空，从0x00-0xff共可以表示256种类型。

`from`:发送方字段，变长，可为空，标识发送方的id,唯一标识

`to`:接收方字段，变长，可为空，标识接收方id,唯一标识

`timestamp`:时间戳字段，4个字节，不可为空，可用于消息排序

`content`:消息正文字段，变长，可为空，针对不同`type`值,`content`结构不同.


#### 主题订阅的实现

`f/<uid>`:通讯录类主题，这类的主题接收到通讯录内好友的即时消息。

`g/<gid>`:群组类消息，这类的主题可以接收群组内的消息

`s/<uid>`:状态类主题，这类主题接收状态改变的消息

#### 即时通讯的实现




 
